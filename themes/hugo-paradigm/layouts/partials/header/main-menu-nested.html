<div class="main-menu">
    <ul>
        {{ $currentPage := . }}
        {{ range .Site.Menus.main }}
    
        {{ if .HasChildren }}
            <li class="menu-item-{{ .Name | lower }}{{if or ($currentPage.IsMenuCurrent "main" .) ($currentPage.HasMenuCurrent "main" .) }} active{{ end }}">
            <a href="{{ .URL }}">
                {{ .Pre }}
                <span>{{ .Name }}</span>
            </a>

            <div class="dropdown">
                <span class="triangle"></span>
                <ul class="sub-menu">
                    {{ range .Children }}
                    <li class="{{ if $currentPage.IsMenuCurrent "main" . }}active{{ end }}">
                        <a href="{{ .URL }}">{{ .Name }}</a>
                    {{ end }}
                </ul>
            </div>
        {{else}}
            <li class="menu-item-{{ .Name | lower }}{{ if $currentPage.IsMenuCurrent "main" . }} active{{ end }}">
            <a href="{{.URL}}">
                {{ .Pre }}
                <span>{{ .Name }}</span>
            </a>
        {{end}}
        {{end}}
    </ul>
</div>
